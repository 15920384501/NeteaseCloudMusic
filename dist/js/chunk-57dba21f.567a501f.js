(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57dba21f"],{"4a98":function(s,t,a){},9953:function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"password-login-wrapper"},[a("div",{staticClass:"phone-bar"},[a("span",{staticClass:"bar-text"},[s._v("手机号登录")]),a("span",{staticClass:"icon-back bar-icon",on:{click:function(t){return s.$router.go(-1)}}})]),a("div",{staticClass:"password-form"},[a("van-form",{on:{submit:s.onSubmit}},[a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"输入密码",rules:[{pattern:/.{6,}/,required:!0,message:"密码长度至少为6位"}]},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[s._v(" 立即登录 ")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:s.loginLoading,expression:"loginLoading"}],staticClass:"login-loading"},[a("van-loading",{attrs:{color:"#fff",type:"spinner",size:"24px"}},[a("span",{staticClass:"loading-text"},[s._v("登陆中...")])])],1)])},o=[],n=a("5530"),i=a("4ba1"),r=a("2f62"),c=a("d399"),l={name:"PasswordLogin",data:function(){return{password:"",loginLoading:!1}},methods:Object(n["a"])({},Object(r["b"])({setUserPassword:i["p"],setUserId:i["n"]}),{onSubmit:function(){var s=this;this.loginLoading=!0,this.setUserPassword(this.password),console.log(this.password,this.user),this.timer=setTimeout((function(){s.axios({method:"POST",url:"http://localhost:3000/login/cellphone",data:{phone:s.user.phone,password:s.user.password}}).then((function(t){s.loginLoading=!1,200===t.data.code?(console.log("登录成功"),localStorage.setItem("login","true"),localStorage.setItem("phone",s.user.phone),localStorage.setItem("password",s.user.password),s.setUserId(t.data.account.id),localStorage.setItem("id",t.data.account.id),s.$router.push("/find")):502===t.data.code&&(console.log("账号或密码错误"),Object(c["a"])("账号或密码错误"))}))}),5e3)}}),computed:Object(n["a"])({},Object(r["c"])({user:function(s){return s.user}})),beforeDestroy:function(){clearTimeout(this.timer)}},d=l,u=(a("c09d"),a("2877")),p=Object(u["a"])(d,e,o,!1,null,"a0b187c6",null);t["default"]=p.exports},c09d:function(s,t,a){"use strict";var e=a("4a98"),o=a.n(e);o.a}}]);
//# sourceMappingURL=chunk-57dba21f.567a501f.js.map