(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d47439c"],{"119e":function(t,i,s){"use strict";var a=s("2bf4"),e=s.n(a);e.a},"2bf4":function(t,i,s){},5125:function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"myMusic-wrapper",style:{background:"url("+t.backgroundUrl+"?param="+t.fullWidth+"y"+t.fullHeight+") no-repeat"}},[s("div",{staticClass:"topBar"}),s("div",{staticClass:"myMusic-mask"}),s("div",{staticClass:"myMusic-topBar",style:{background:"url("+t.backgroundUrl+"?param="+t.fullWidth+"y"+t.fullHeight+") no-repeat"}},[s("span",{staticClass:"icon-cloud"}),t.songsPlaying.picUrl?s("div",{staticClass:"top-playing"},[s("div",{staticClass:"myMusic",on:{click:function(i){return t.intoMusicPlaying()}}},[s("img",{style:{transform:"rotate("+t.rotatingDeg+"deg)"},attrs:{src:t.songsPlaying.picUrl,alt:""}})])]):t._e()]),s("div",{staticClass:"myMusic-user"},[s("div",{staticClass:"user-information"},[s("div",{staticClass:"user-pic"},[s("img",{attrs:{src:""+t.avatarUrl,alt:""}})]),s("div",{staticClass:"user-right"},[s("p",{staticClass:"user-name"},[t._v(" "+t._s(t.nickname)+" "),s("span",{staticClass:"user-VIP"},[t._v("开通黑胶VIP >")])]),t._m(0)])]),t._m(1)]),s("div",{staticClass:"myMusic-content"},[t._m(2),s("div",{ref:"musicApplication",staticClass:"content-musicApplication"},[s("div",{staticClass:"musicApplication "},[s("div",{staticClass:"musicApplication-item"},[s("div",{staticClass:"item-mask",on:{click:t.intoMusicPlaylistView}},[t._m(3),t._m(4)])]),t._m(5),t._m(6),t._m(7),t._m(8)])]),s("div",{staticClass:"myMusic-playlist"},[s("div",{staticClass:"playlist-title"},[s("span",{class:{active:1===t.playlistCount},on:{click:function(i){t.playlistCount=1}}},[t._v("创建歌单"),s("small",[t._v(" "+t._s(t.createPlaylist.length))])]),s("span",{class:{active:2===t.playlistCount},on:{click:function(i){t.playlistCount=2}}},[t._v("收藏歌单"),s("small",[t._v(" "+t._s(t.collectPlaylist.length))])]),s("i",{staticClass:"icon-more",on:{click:function(i){t.showManagementMenu=!0}}})]),s("div",{staticClass:"playlist-content clearFix"},[t._l(t.showPlaylist,(function(i,a){return s("div",{key:a,staticClass:"playlist-item",on:{click:function(s){return t.intoMusicPlaylistView(i)}}},[s("div",{staticClass:"item-pic"},[s("img",{attrs:{src:i.coverImgUrl,alt:""}})]),s("div",{staticClass:"item-txt"},[s("p",{staticClass:"item-playlistName"},[t._v(t._s(i.name))]),s("p",{staticClass:"item-playlistCount"},[t._v(t._s(i.trackCount)+"首")])])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.playlistCount,expression:"playlistCount === 1"}],staticClass:"playlist-item newListBtn",on:{click:t.onNewPlaylist}},[s("div",{staticClass:"item-pic"},[s("van-icon",{attrs:{name:"add-o",size:"26px",color:"rgb(204,204,204)"}})],1),t._m(9)])],2)]),s("van-action-sheet",{attrs:{actions:t.managementMenuActions,description:"请选择"},on:{select:t.onSelect},model:{value:t.showManagementMenu,callback:function(i){t.showManagementMenu=i},expression:"showManagementMenu"}}),s("van-action-sheet",{attrs:{title:"新建歌单","cancel-text":"完成","close-icon":"false"},on:{cancel:t.onFinish},model:{value:t.showNewPlaylistMenu,callback:function(i){t.showNewPlaylistMenu=i},expression:"showNewPlaylistMenu"}},[s("div",{staticClass:"newPlaylistMenu-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPlaylistName,expression:"newPlaylistName"}],attrs:{type:"text",placeholder:"歌单标题"},domProps:{value:t.newPlaylistName},on:{input:function(i){i.target.composing||(t.newPlaylistName=i.target.value)}}})])])],1),s("transition",{attrs:{name:"newPlaylist"}},[s("router-view",{attrs:{showPlaylist:t.showPlaylist},on:{deleteItem:t.deleteItem}})],1)],1)},e=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("p",{staticClass:"user-leave"},[s("span",[t._v("Lv.6")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"myMusic-funcKey"},[s("div",{staticClass:"funcKey-item"},[s("div",{staticClass:"funcKey-icon icon-uniE91E"}),s("div",{staticClass:"funcKey-text"},[t._v(" 本地音乐 ")])]),s("div",{staticClass:"funcKey-item"},[s("div",{staticClass:"funcKey-icon icon-5"}),s("div",{staticClass:"funcKey-text"},[t._v(" 我的电台 ")])]),s("div",{staticClass:"funcKey-item"},[s("div",{staticClass:"funcKey-icon icon-7"}),s("div",{staticClass:"funcKey-text"},[t._v(" 我的收藏 ")])]),s("div",{staticClass:"funcKey-item"},[s("div",{staticClass:"funcKey-icon icon-uniE91E"}),s("div",{staticClass:"funcKey-text"},[t._v(" 关注新歌 ")])])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"content-title"},[t._v(" 我的音乐 "),s("div",{staticClass:"title-right"},[t._v(" 更多> ")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"item-text"},[s("p",[s("span",{staticClass:"icon-6"})]),t._v(" 我喜欢的音乐 ")])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"item-introduce"},[s("div",{staticClass:"cardiac"},[s("span",{staticClass:"triangle"}),t._v(" 心动模式 ")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"musicApplication-item"},[s("div",{staticClass:"item-mask"},[s("div",{staticClass:"item-text"},[s("p",[s("span",{staticClass:"icon-FM_"})]),t._v(" 私人FM ")]),s("div",{staticClass:"item-introduce"},[t._v("最懂你的推荐")])])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"musicApplication-item"},[s("div",{staticClass:"item-recommend"},[t._v("推荐")]),s("div",{staticClass:"item-text"},[s("p",[s("span",{staticClass:"icon-moon"})]),t._v(" Sati空间 ")]),s("div",{staticClass:"item-introduce"},[t._v("释放压力轻音乐")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"musicApplication-item"},[s("div",{staticClass:"item-recommend"},[t._v("推荐")]),s("div",{staticClass:"item-text"},[s("p",[s("span",{staticClass:"icon-9"})]),t._v(" 古典专区 ")]),s("div",{staticClass:"item-introduce"},[t._v("专业的古典音乐大全")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"musicApplication-item"},[s("div",{staticClass:"item-recommend"},[t._v("推荐")]),s("div",{staticClass:"item-text"},[s("p",[s("span",{staticClass:"icon-8"})]),t._v(" 热歌放映厅 ")]),s("div",{staticClass:"item-introduce"},[t._v("好音乐，看得见")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"item-txt"},[s("p",{staticClass:"item-playlistName"},[t._v("新建歌单")])])}],n=(s("99af"),s("4de4"),s("b0c0"),s("5530")),l=s("4ba1"),c=s("2241"),o=s("1fba"),r=s("2f62"),u={name:"Mine",data:function(){return{userInformation:null,avatarUrl:"",nickname:"",backgroundUrl:"",playlist:[],playlistCount:1,likeMusicPlaylist:null,showManagementMenu:!1,showNewPlaylistMenu:!1,newPlaylistName:"",managementMenuActions:[{name:"新建歌单",type:1},{name:"管理歌单",type:2},{name:"导入外部歌单",type:3},{name:"恢复歌单",type:4},{name:"切换至单列模式",type:5}]}},methods:Object(n["a"])({},Object(r["b"])({setDetailedPlaylist:l["c"],setDetailedPlaylistArr:l["d"],setUserName:l["o"],setUserAvatarUrl:l["m"]}),{intoMusicPlaylistView:function(t){var i,s=this;i=t.id?t:this.likeMusicPlaylist;var a=i,e=a.id;console.log(i,"obj"),this.axios({url:"playlist/detail?id=".concat(e),withCredentials:!0}).then((function(t){s.setDetailedPlaylist(t.data.playlist),s.setDetailedPlaylistArr(t.data.playlist.tracks)})),this.setUserName(i.creator.nickname),this.setUserAvatarUrl(i.creator.avatarUrl),this.$router.push({name:"MusicPlaylist"})},intoMusicPlaying:function(){this.$router.push({name:"MusicPlaying"})},onSelect:function(t){this.showManagementMenu=!1,1===t.type&&(this.showNewPlaylistMenu=!0),2===t.type&&this.$router.push({name:"ManagementPlaylistMenu"})},onFinish:function(){var t=this;this.showNewPlaylistMenu=!1,this.newPlaylistName&&(0===this.isDuplicateName.length?this.axios({url:"/playlist/create?name=".concat(this.newPlaylistName),withCredentials:!0}).then((function(i){t.newPlaylistName="",t.playlist.push(i.data.playlist)})):Object(c["a"])({message:"该歌单已存在，请更换歌单标题"}))},onNewPlaylist:function(){this.showNewPlaylistMenu=!0},deleteItem:function(t){this.playlist=this.playlist.filter((function(i){return i.id!=t}))}}),computed:Object(n["a"])({},Object(r["c"])({songsPlaying:function(t){return t.songsPlaying},user:function(t){return t.user},rotatingDeg:function(t){return t.rotatingDeg}}),{fullWidth:function(){return document.documentElement.clientWidth},fullHeight:function(){return document.documentElement.clientHeight},createPlaylist:function(){var t=this;return this.playlist.filter((function(i){return i.userId==t.user.id}))},collectPlaylist:function(){var t=this;return this.playlist.filter((function(i){return i.userId!=t.user.id}))},showPlaylist:function(){return 1===this.playlistCount?this.createPlaylist:this.collectPlaylist},isDuplicateName:function(){var t=this;return this.showPlaylist.filter((function(i){return i.name===t.newPlaylistName}))}}),mounted:function(){var t=this;console.log(this.user.id);var i=localStorage.getItem("id");this.axios({url:"/user/detail?uid=".concat(i),withCredentials:!0}).then((function(i){t.userInformation=i.data.profile,t.avatarUrl=t.userInformation.avatarUrl,t.nickname=t.userInformation.nickname,t.backgroundUrl=t.userInformation.backgroundUrl})),this.$nextTick((function(){t.musicApplicationBS?t.musicApplicationBS.refresh():t.musicApplicationBS=new o["a"](t.$refs.musicApplication,{scrollY:!1,scrollX:!0,click:!0,probeType:2,swipeBounceTime:400})})),this.axios({url:"/user/playlist?uid=".concat(i,"&timestamp=").concat((new Date).getTime()),withCredentials:!0}).then((function(i){console.log(i),t.likeMusicPlaylist=i.data.playlist.shift(),console.log(t.likeMusicPlaylist),t.playlist=i.data.playlist,console.log(t.createPlaylist),console.log(t.collectPlaylist)}))}},m=u,d=(s("119e"),s("2877")),v=Object(d["a"])(m,a,e,!1,null,"fbd17bb8",null);i["default"]=v.exports}}]);
//# sourceMappingURL=chunk-3d47439c.e31d6b0a.js.map