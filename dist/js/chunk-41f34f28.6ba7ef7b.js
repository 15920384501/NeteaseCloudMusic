(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41f34f28"],{"4bc9":function(i,t,s){"use strict";var e=s("8bca"),n=s.n(e);n.a},5899:function(i,t){i.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(i,t,s){var e=s("1d80"),n=s("5899"),a="["+n+"]",o=RegExp("^"+a+a+"*"),r=RegExp(a+a+"*$"),c=function(i){return function(t){var s=String(e(t));return 1&i&&(s=s.replace(o,"")),2&i&&(s=s.replace(r,"")),s}};i.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(i,t,s){var e=s("861d"),n=s("d2bb");i.exports=function(i,t,s){var a,o;return n&&"function"==typeof(a=t.constructor)&&a!==s&&e(o=a.prototype)&&o!==s.prototype&&n(i,o),i}},"7db0":function(i,t,s){"use strict";var e=s("23e7"),n=s("b727").find,a=s("44d2"),o=s("ae40"),r="find",c=!0,l=o(r);r in[]&&Array(1)[r]((function(){c=!1})),e({target:"Array",proto:!0,forced:c||!l},{find:function(i){return n(this,i,arguments.length>1?arguments[1]:void 0)}}),a(r)},"8bca":function(i,t,s){},a9e3:function(i,t,s){"use strict";var e=s("83ab"),n=s("da84"),a=s("94ca"),o=s("6eeb"),r=s("5135"),c=s("c6b6"),l=s("7156"),f=s("c04e"),u=s("d039"),g=s("7c73"),h=s("241c").f,d=s("06cf").f,p=s("9bf2").f,v=s("58a8").trim,C="Number",w=n[C],m=w.prototype,y=c(g(m))==C,b=function(i){var t,s,e,n,a,o,r,c,l=f(i,!1);if("string"==typeof l&&l.length>2)if(l=v(l),t=l.charCodeAt(0),43===t||45===t){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:e=2,n=49;break;case 79:case 111:e=8,n=55;break;default:return+l}for(a=l.slice(2),o=a.length,r=0;r<o;r++)if(c=a.charCodeAt(r),c<48||c>n)return NaN;return parseInt(a,e)}return+l};if(a(C,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var L,_=function(i){var t=arguments.length<1?0:i,s=this;return s instanceof _&&(y?u((function(){m.valueOf.call(s)})):c(s)!=C)?l(new w(b(t)),s,_):b(t)},x=e?h(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)r(w,L=x[k])&&!r(_,L)&&p(_,L,d(w,L));_.prototype=m,m.constructor=_,o(n,C,_)}},eb37:function(i,t,s){"use strict";s.r(t);var e=function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"singer-wrapper"},[s("div",{staticClass:"singer-navBar"},[s("van-nav-bar",{attrs:{title:"歌手分类","left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":i.goBack},scopedSlots:i._u([i.songsPlaying.picUrl?{key:"right",fn:function(){return[s("div",{staticClass:"top-playing"},[s("div",{staticClass:"myMusic ",on:{click:function(t){return i.$router.push({name:"MusicPlaying"})}}},[s("img",{style:{transform:"rotate("+i.rotatingDeg+"deg)"},attrs:{src:i.songsPlaying.picUrl,alt:""}})])])]},proxy:!0}:null],null,!0)})],1),s("div",{staticClass:"singer-content"},[s("div",{ref:"singerClassification",staticClass:"singer-classification"},[s("div",{staticClass:"area-classification"},[s("span",{class:{active:"7"===i.singerClassification.area},on:{click:function(t){return i.setClassification({area:"7"})}}},[i._v("华语")]),s("span",{class:{active:"96"===i.singerClassification.area},on:{click:function(t){return i.setClassification({area:"96"})}}},[i._v("欧美")]),s("span",{class:{active:"8"===i.singerClassification.area},on:{click:function(t){return i.setClassification({area:"8"})}}},[i._v("日本")]),s("span",{class:{active:"16"===i.singerClassification.area},on:{click:function(t){return i.setClassification({area:"16"})}}},[i._v("韩国")]),s("span",{class:{active:"0"===i.singerClassification.area},on:{click:function(t){return i.setClassification({area:"0"})}}},[i._v("其他")])]),s("div",{staticClass:"type-classification"},[s("span",{class:{active:"1"===i.singerClassification.type},on:{click:function(t){return i.setClassification({type:"1"})}}},[i._v("男")]),s("span",{class:{active:"2"===i.singerClassification.type},on:{click:function(t){return i.setClassification({type:"2"})}}},[i._v("女")]),s("span",{class:{active:"3"===i.singerClassification.type},on:{click:function(t){return i.setClassification({type:"3"})}}},[i._v("乐队/组合")])]),s("p",{staticClass:"singerList-title"},[i._v("热门歌手 ")])]),s("van-loading",{directives:[{name:"show",rawName:"v-show",value:i.loadingShow,expression:"loadingShow"}],staticClass:"loading",attrs:{size:"24px",color:"red"}},[i._v("加载中...")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!i.loadingShow,expression:"!loadingShow"}],ref:"singerList",staticClass:"singer-list",style:{top:i.singerListTop+"px"}},[s("div",[i._l(i.singerClassificationList,(function(t,e){return s("div",{key:e,staticClass:"singer-item"},[s("div",{staticClass:"singer-pic"},[s("img",{attrs:{src:t.img1v1Url+"?param=50y50",alt:""}})]),s("div",{staticClass:"singer-name"},[i._v(" "+i._s(t.name)+" "),t.alias[0]?s("span",{staticClass:"alias"},[i._v("("+i._s(t.alias[0])+")")]):i._e()]),s("div",{staticClass:"singer-follow"},[t.followed?s("span",{staticClass:"followed",on:{click:function(s){return i.follow(t.name)}}},[i._v("✔ 已关注")]):s("span",{staticClass:"follow",on:{click:function(s){return i.follow(t.name)}}},[i._v("+ 关注")])])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:i.refreshLoading,expression:"refreshLoading"}],staticClass:"refresh-loading"},[s("van-loading",{attrs:{color:"#1989fa"}})],1)],2)])],1)])},n=[],a=(s("99af"),s("7db0"),s("4160"),s("b0c0"),s("a9e3"),s("159b"),s("5530")),o=s("1fba"),r=s("2f62"),c=s("d399"),l={name:"SingerView",data:function(){return{refreshLoading:!1,singerListTop:0,singerClassificationList:[],singerClassification:{type:"0",area:"-1",limit:"20",offset:0,hot:!0},loadingShow:!0}},methods:{goBack:function(){this.$router.go(-1)},setClassification:function(i){this.singerClassification.offset=0;var t=this.singerClassification.hot;if(this.loadingShow=!0,this.singerList.scrollTo(0,0,0),t){var s=i.type||"1",e=i.area||"7";this.singerClassification=Object(a["a"])({},this.singerClassification,{type:s,area:e,hot:!1}),this.requestAxios()}else i.type&&(this.singerClassification.type=i.type),i.area&&(this.singerClassification.area=i.area),this.requestAxios()},requestAxios:function(){var i=this,t=this.singerClassification,s=t.type,e=t.area,n=t.limit,a=t.offset;this.axios({url:"/artist/list?type=".concat(s,"&area=").concat(e,"&limit=").concat(n,"&offset=").concat(a),withCredentials:!0}).then((function(t){i.singerClassificationList=t.data.artists,i.singerList.refresh(),i.loadingShow=!1}))},follow:function(i){var t=this.singerClassificationList.find((function(t){return t.name===i}));console.log(t),t.followed?(this.followAxios(t.id,0),t.followed=!1):(this.followAxios(t.id,1),t.followed=!0)},followAxios:function(i,t){var s=this;this.axios({method:"POST",url:"http://localhost:3000/login/cellphone",withCredentials:!0,data:{phone:this.user.phone,password:this.user.password}}).then((function(e){console.log(e),s.axios({url:"/follow?id=".concat(i,"&t=").concat(t),withCredentials:!0}).then((function(i){console.log(i),i.data.code?Object(c["a"])(i.data.followContent||i.data.msg):Object(c["a"])("关注失败")})).catch((function(i){console.log(i),Object(c["a"])("关注失败")}))}))}},computed:Object(a["a"])({},Object(r["c"])({songsPlaying:function(i){return i.songsPlaying},rotatingDeg:function(i){return i.rotatingDeg},user:function(i){return i.user}})),mounted:function(){var i=this;this.loadingShow=!1,this.singerListTop=this.$refs.singerClassification.getBoundingClientRect().height+50,this.$nextTick((function(){i.singerList?i.singerList.refresh():(i.singerList=new o["a"](i.$refs.singerList,{probeType:2,pullUpLoad:{threshold:0},click:!0}),i.singerList.on("pullingUp",(function(){i.refreshTimer&&clearTimeout(i.refreshTimer),i.refreshLoading=!0,i.refreshTimer=setTimeout((function(){i.singerClassification.offset+=Number(i.singerClassification.limit);var t,s=i.singerClassification,e=s.offset,n=s.hot,a=s.type,o=s.area,r=s.limit;t=n?"/top/artists?offset=".concat(e,"&limit=20"):"/artist/list?type=".concat(a,"&area=").concat(o,"&limit=").concat(r,"&offset=").concat(e),i.axios({url:t,withCredentials:!0}).then((function(t){i.refreshLoading=!1,t.data.artists.forEach((function(t){i.singerClassificationList.push(t)})),i.singerList.finishPullUp(),i.singerList.refresh()}))}),1e3)})))}))},beforeRouteEnter:function(i,t,s){console.log(i,t,"-----beforeRouterEnter"),s((function(i){i.axios({url:"/top/artists?offset=0&limit=20",withCredentials:!0}).then((function(t){i.singerClassificationList=t.data.artists}))}))},beforeDestroy:function(){this.singerList.destroy(),this.singerList=null,clearTimeout(this.refreshTimer)}},f=l,u=(s("4bc9"),s("2877")),g=Object(u["a"])(f,e,n,!1,null,"6e8c5bfe",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-41f34f28.6ba7ef7b.js.map