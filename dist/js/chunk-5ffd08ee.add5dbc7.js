(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ffd08ee"],{"2ead":function(t,s,e){},a15b:function(t,s,e){"use strict";var i=e("23e7"),a=e("44ad"),n=e("fc6a"),r=e("a640"),l=[].join,c=a!=Object,o=r("join",",");i({target:"Array",proto:!0,forced:c||!o},{join:function(t){return l.call(n(this),void 0===t?",":t)}})},b409:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"detailsPage-wrapper"},[e("div",{staticClass:"detailsPage-top"},[e("div",{staticClass:"detailsPage-back",on:{click:function(s){return t.$router.go(-1)}}},[e("span",{staticClass:"icon-back"})]),e("div",{staticClass:"detailsPage-searchBar"},[e("van-search",{attrs:{placeholder:"请输入搜索关键词",shape:"round"},on:{focus:function(s){return t.$router.go(-1)}},model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}})],1)]),e("div",{ref:"detailsPageBScroll",staticClass:"detailsPage-BScroll"},[e("div",[t.interestedAlbum||t.interestedArtist||t.interestedMv?e("div",{staticClass:"detailsPage-interested"},[e("div",{staticClass:"interested-title"},[t._v(" 你可能感兴趣 ")]),e("div",{staticClass:"interested-lists"},[t.interestedAlbum?e("div",{staticClass:"interested-item interested-album"},[e("div",{staticClass:"item-pic"},[e("img",{attrs:{src:t.interestedAlbum.picUrl+"?param=200y200",alt:""}})]),e("div",{staticClass:"item-txt"},[e("div",{staticClass:"item-title"},[t._v(" 专辑："+t._s(t.interestedAlbum.name)+" ")]),e("div",{staticClass:"item-describe"},[t._v(" "+t._s(t.interestedAlbum.artist.name)+" ")]),t.interestedAlbum.onSale?e("div",{staticClass:"item-onSale"},[t._v("数字专辑销售中")]):t._e()]),e("div",{staticClass:"item-more"},[e("van-icon",{attrs:{name:"arrow",size:"20px"}})],1)]):t._e(),t.interestedArtist?e("div",{staticClass:"interested-item interested-artist"},[e("div",{staticClass:"item-pic"},[e("img",{attrs:{src:t.interestedArtist.picUrl+"?param=200y200",alt:""}})]),e("div",{staticClass:"item-txt"},[e("div",{staticClass:"item-title"},[t._v(" 歌手："),e("span",{staticClass:"artist-name"},[t._v(t._s(t.interestedArtist.name))]),t._v(" "),t.interestedArtist.alias.length>0?e("span",{staticClass:"artist-alias"},[t._v("（"+t._s(t.interestedArtist.alias[0])+"）")]):t._e()]),e("div",{staticClass:"item-describe"},[e("span",[t._v("粉丝："+t._s(t._f("sizeFilter")(t.interestedArtist.fansSize)))]),e("span",[t._v("歌曲："+t._s(t._f("sizeFilter")(t.interestedArtist.musicSize)))]),e("span",[t._v("专辑："+t._s(t._f("sizeFilter")(t.interestedArtist.albumSize)))])])]),e("div",{staticClass:"item-more"},[e("van-icon",{attrs:{name:"arrow",size:"20px"}})],1)]):t._e(),t.interestedMv?e("div",{staticClass:"interested-item interested-mv"},[e("div",{staticClass:"item-pic"},[t._m(0),e("img",{attrs:{src:t.interestedMv.cover+"?param=360y200",alt:""}})]),e("div",{staticClass:"item-txt"},[e("div",{staticClass:"item-title"},[t._v(" MV："),e("span",[t._v(t._s(t.interestedMv.name))])]),e("div",{staticClass:"item-describe"},[t._v(" "+t._s(t.interestedMv.artistName)+" ")])]),e("div",{staticClass:"item-more"},[e("van-icon",{attrs:{name:"arrow",size:"20px"}})],1)]):t._e()])]):t._e(),e("div",{staticClass:"detailPage-single"},[t._m(1),e("div",{staticClass:"single-list"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.resultSongsLists,(function(s){return e("van-cell",{key:s.id},[e("div",{staticClass:"single-item"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.songsPlaying.id===s.id,expression:"songsPlaying.id === item.id"}],staticClass:"icon-uniE911 play"}),e("div",{staticClass:"item-txt",on:{click:function(e){return t.playSingle(s)}}},[e("div",{staticClass:"item-song-name",class:{active:t.songsPlaying.id===s.id}},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"item-album"},[e("i"),e("span",{staticClass:"artist"},[t._v(" "+t._s(t._f("artistsFilter")(s.artists))+" ")]),t._v(" - "),e("span",{staticClass:"album-name"},[t._v(" "+t._s(s.album.name)+" ")])])]),e("div",{staticClass:"item-more"},[e("span",{staticClass:"icon-more"})])])])})),1)],1)])])])])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"item-play"},[e("span",{staticClass:"icon-play3"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"single-title"},[e("div",{staticClass:"title-box"},[t._v(" 单曲 ")])])}],n=(e("99af"),e("4de4"),e("4160"),e("a15b"),e("d81d"),e("b0c0"),e("159b"),e("5530")),r=e("1fba"),l=e("2f62"),c=e("4ba1"),o=e("d399"),d={name:"DetailsPage",data:function(){return{keyword:"",interestedMv:null,interestedArtist:null,interestedAlbum:null,resultSongsLists:[],resultSongsListsIndex:0,loading:!1,finished:!1,refreshing:!1}},filters:{sizeFilter:function(t){if(t>1e4){var s=Math.floor(t/1e3)%10,e=Math.floor(Math.floor(t/1e3)/10);return"".concat(e,".").concat(s,"万")}return t},artistsFilter:function(t){var s=t.map((function(t){return t.name})),e=s.join("/");return e}},methods:Object(n["a"])({},Object(l["b"])({setSongsPlaying:c["l"],setAudioSrc:c["a"],setPlay:c["g"]}),{onLoad:function(){var t=this;this.axios({url:"/search?keywords=".concat(this.keyword,"&offset=").concat(this.resultSongsListsIndex),withCredentials:!0}).then((function(s){console.log(s.data.result.songs,"---------搜索结果"),s.data.result.songs?(s.data.result.songs.forEach((function(s){t.resultSongsLists.push(s)})),t.resultSongsListsIndex++,t.loading=!1):t.finished=!0}))},playSingle:function(t){var s=this;console.log(t);var e=t.id;if(this.songsPlaying.id===e)return this.play||(this.setPlay(!0),this.audio.play()),void this.$router.push({name:"MusicPlaying"});this.axios({url:"/song/detail?ids=".concat(e),withCredentials:!0}).then((function(t){var i=t.data.songs.filter((function(t){return t.id===e}))[0];s.setSongsPlaying({id:e,picUrl:i.al.picUrl})})),this.axios.get("/check/music?id=".concat(e)).then((function(t){!0===t.data.success?s.axios.get("/song/url?id=".concat(e)).then((function(t){t.data.data[0].url?(s.setAudioSrc(t.data.data[0].url),s.setPlay(!0),s.audio.play(),s.setListMode(1)):(Object(o["a"])("该歌曲需要VIP，无法播放"),s.audio.pause())})):console.log("该歌曲没有版权，无法播放")}))}}),computed:Object(n["a"])({},Object(l["c"])({audio:function(t){return t.audio},play:function(t){return t.play},songsPlaying:function(t){return t.songsPlaying}})),mounted:function(){var t=this;this.keyword=this.$route.query.keyword,this.keyword&&this.axios({method:"POST",url:"/search/multimatch",params:{keywords:this.keyword},withCredentials:!0}).then((function(s){var e=s.data.result,i=e.mv,a=e.artist,n=e.album;i&&(t.interestedMv=i[0]),a&&(t.interestedArtist=a[0]),n&&(t.interestedAlbum=n[0])})),this.$nextTick((function(){t.singleBScroll?t.singleBScroll.refresh():t.singleBScroll=new r["a"](t.$refs.detailsPageBScroll,{probeType:2,click:!0})}))}},u=d,v=(e("f1de"),e("2877")),m=Object(v["a"])(u,i,a,!1,null,"4f8015c6",null);s["default"]=m.exports},d81d:function(t,s,e){"use strict";var i=e("23e7"),a=e("b727").map,n=e("1dde"),r=e("ae40"),l=n("map"),c=r("map");i({target:"Array",proto:!0,forced:!l||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f1de:function(t,s,e){"use strict";var i=e("2ead"),a=e.n(i);a.a}}]);
//# sourceMappingURL=chunk-5ffd08ee.add5dbc7.js.map